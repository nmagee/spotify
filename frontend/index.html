<!DOCTYPE HTML>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>

    <title>DS2022 Homemade Spotify</title>
</head>

<body>
<div class="container" style="margin-top:2em;">
  <h2>Homemade Spotify</h2>
    <script>
    $(document).ready(function() {
      $.ajax({
        url: "https://bv1e9klemd.execute-api.us-east-1.amazonaws.com/api/songs",
        method: "GET",
        dataType: "json", 
        success: function(data) {
          // Do something with the returned data
          for (var i = 0; i < data.length; i++) {
            $("#player").append("<img src='" + data[i].image + "' width='100' height='100' style='float:left;margin:10px;' />");
            $("#player").append("<h3>" + data[i].title + "</h3>");
            $("#player").append("<p>" + data[i].artist + " <small>[" + data[i].genre + "]</small></p>");
            $("#player").append("<audio controls><source src='" + data[i].file + "' type='audio/mpeg'></audio>");
            $("#player").append("<hr size=1 /><br>");
          }
          console.log(data);
        },
        error: function(error) {
          // Handle errors
          console.error("Error fetching data:", error);
        }
      });
    });
    </script>

    <div id="player"></div>

    <p>This sample application plays audio content hosted in Amazon S3.<p>

</div>
</body>
</html>

